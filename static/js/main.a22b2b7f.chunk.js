(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a(1),s=a.n(r),c=a(4),l=a.n(c),o=(a(18),a(5)),u=a(2),d=a.p+"static/media/logo.e5360e9e.png",j=(a(11),a(12)),g=a(8),b=a(7),m=a.p+"static/media/1.522f71f4.png",h=a.p+"static/media/2.fadbdd46.png",p=a.p+"static/media/3.4c9cb109.png",f=a.p+"static/media/4.b0a6af0a.png",O=a.p+"static/media/5.fabcb34f.png",x=a.p+"static/media/unrated.c1e6bbfc.png";var v=function(e){var t,a=e.selectedRestaurant,s=e.setSelectedRestaurant,c=e.addReviewToRestaurant,l=Object(r.useState)(""),o=Object(u.a)(l,2),d=o[0],j=o[1],g=Object(r.useState)(null),v=Object(u.a)(g,2),y=v[0],w=v[1],R=Object(r.useState)(!0),k=Object(u.a)(R,2),S=k[0],N=k[1],I=Object(r.useState)(null),C=Object(u.a)(I,2),T=C[0],D=C[1],A="dummy"===a.restaurantType?a.ratings:a.reviews;if("dummy"!==a.restaurantType){var F=a.geometry.location.lat(),B=a.geometry.location.lng();n="https://maps.googleapis.com/maps/api/streetview?location=".concat(F,",").concat(B,"&size=600x400&key=AIzaSyAl7rJskwTxg3fIJ3wKhN_KT0emk1LlcI0")}return Object(i.jsxs)("div",(t={className:"reviewItem"},Object(b.a)(t,"className",a.name),Object(b.a)(t,"children",["",Object(i.jsx)("h1",{className:"ModalHeader",children:a.name}),Object(i.jsx)("img",{className:"modalImage",src:"dummy"===a.restaurantType?a.image:n,alt:"image of restaurant"}),A?A.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)("p",{children:["",Object(i.jsxs)("blockquote",{children:[Object(i.jsx)("img",{src:(t=e.rating,t<1.5&&t>0?m:t<2.5&&t>=1.5?h:t<3.5&&t>=2.5?p:t<4.5&&t>=3.5?f:t>4.5?O:x),className:"ratingStars"}),Object(i.jsx)("br",{}),e.text,Object(i.jsx)("br",{})]})]},e.key)});var t})):Object(i.jsxs)("div",{children:[Object(i.jsx)("br",{}),' "reviews are currently unavailable for this restaurant, why not add one!"']}),Object(i.jsxs)("div",{className:"addReviewOption",children:[!0===S&&Object(i.jsxs)("div",{className:"addReviewMessage",children:["What do you think? ",Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsxs)("button",{className:"reviewSubmitButton",type:"button",value:"Submit",onClick:function(){N(null),D(!0)},children:[" ","Add your own review here"]}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{})]}),!0===T&&Object(i.jsx)("div",{className:"addReview",children:Object(i.jsxs)("form",{id:"inputForm",children:[Object(i.jsx)("label",{for:"rRating",className:"labelReviewText",children:"\xa0\xa0 Rating:"}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{className:"userRatingInput",children:Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("input",{type:"radio",checked:"1"===y,id:"1",name:"userRating",value:1,onChange:function(e){return w(e.target.value)}}),"\xa0 ",Object(i.jsx)("label",{for:"one",children:"1"})]})," ",Object(i.jsxs)("li",{children:[Object(i.jsx)("input",{type:"radio",checked:"2"===y,id:"2",name:"userRating",value:2,onChange:function(e){return w(e.target.value)}}),"\xa0 ",Object(i.jsx)("label",{for:"two",children:"2"})]}),"\xa0"," ",Object(i.jsxs)("li",{children:[" ",Object(i.jsx)("input",{type:"radio",checked:"3"===y,id:"3",name:"userRating",value:3,onChange:function(e){return w(e.target.value)}}),"\xa0 ",Object(i.jsx)("label",{for:"three",children:"3"})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("li",{children:[" ",Object(i.jsx)("input",{type:"radio",checked:"4"===y,id:"4",name:"userRating",value:4,onChange:function(e){return w(e.target.value)}}),"\xa0 ",Object(i.jsx)("label",{for:"four",children:"4"})]}),Object(i.jsxs)("li",{children:[" ",Object(i.jsx)("input",{type:"radio",checked:"5"===y,id:"5",name:"userRating",value:5,onChange:function(e){return w(e.target.value)}}),"\xa0 ",Object(i.jsx)("label",{for:"five",children:"5"})]})]})}),Object(i.jsxs)("label",{for:"rAddress",className:"labelReviewText",children:["\xa0\xa0 Review:",Object(i.jsx)("br",{}),Object(i.jsx)("br",{})]}),Object(i.jsx)("textarea",{id:"rReview",name:"rReview",placeholder:"Enter Your Review Here",value:d,rows:"4",cols:"35",onChange:function(e){return j(e.target.value)},children:" "}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"button",className:"reviewSubmitButton",value:"Submit",onClick:function(){return e=d,console.log(y," out of five!  Comment: ",d),N(!0),D(null),c(a.place_id,y,e),void s(null);var e}})]})})]}),Object(i.jsx)("br",{})]),t))};var y=function(e){var t=e.selectedRestaurant,a=e.setSelectedRestaurant,n=e.map,s=e.addReviewToRestaurant,c=Object(r.useState)([]),l=Object(u.a)(c,2),o=l[0],d=l[1];if("dummy"!==t.restaurantType&&!t.reviews){var j={placeId:t.place_id,fields:["rating","review"]};new window.google.maps.places.PlacesService(n).getDetails(j,(function(e,a){a==window.google.maps.places.PlacesServiceStatus.OK&&(t.reviews=e.reviews,d(e))}))}return Object(i.jsx)("article",{className:"Modal",children:Object(i.jsxs)("div",{className:"modalPadding",children:[Object(i.jsx)("div",{className:"modalClose",onClick:function(){a(null)},children:"X"}),Object(i.jsxs)("div",{className:"RestaurantReview",children:[Object(i.jsx)(v,{reviews:o.reviews,selectedRestaurant:t,setSelectedRestaurant:a,addReviewToRestaurant:s}),Object(i.jsxs)("h3",{id:"ratingDisclaimer",children:[" ","PLEASE NOTE: ratings are rounded up or down to the nearest whole number"]})]})]})})},w=a.p+"static/media/shock.84fafc70.jpg";var R=function(e){var t=e.addNewRestaurant,a=e.setAddRestaurantModal,n=Object(r.useState)(""),s=Object(u.a)(n,2),c=s[0],l=s[1],o=Object(r.useState)(""),d=Object(u.a)(o,2),j=d[0],g=d[1];return Object(i.jsx)("article",{className:"Input",children:Object(i.jsxs)("div",{className:"inputPadding",children:[Object(i.jsx)("div",{className:"inputClose",onClick:function(){console.log("closed input"),a(!1)},children:"X"}),Object(i.jsxs)("div",{className:"inputBody",children:[Object(i.jsx)("h1",{id:"LobsterH1",children:"Is your favourite takeaway not here!?"}),Object(i.jsx)("img",{src:w,alt:"shocked face",width:"300px"}),Object(i.jsx)("h1",{children:"No worries! Add it below for review"}),Object(i.jsxs)("form",{id:"inputForm",children:[Object(i.jsx)("label",{for:"rName",className:"labelText",children:"Restaurant Name: \xa0"}),Object(i.jsx)("input",{type:"text",id:"rName",name:"rName",placeholder:"Enter Restaurant Name Here",value:c,onChange:function(e){return l(e.target.value)}}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)("label",{for:"rAddress",className:"labelText",children:"Restaurant Address: \xa0"}),Object(i.jsx)("input",{type:"text",id:"rAddress",name:"rAddress",placeholder:"Enter Restaurant Address Here",value:j,onChange:function(e){return g(e.target.value)}}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"button",value:"Submit",onClick:function(){t(c,j)}})]})]})]})})},k=a.p+"static/media/missing.aa3c4dee.jpg",S={width:"65%",height:"625px"};function N(e){var t=e.selectedRestaurant,a=e.setRestaurants,n=e.restaurants,s=e.addRestaurant,c=e.setSelectedRestaurant,l=e.addReviewToRestaurant,o=Object(r.useState)(null),d=Object(u.a)(o,2),b=d[0],m=d[1],h=Object(r.useState)(null),p=Object(u.a)(h,2),f=p[0],O=p[1],x=Object(r.useState)(null),v=Object(u.a)(x,2),w=v[0],N=v[1],I=Object(r.useState)({}),C=Object(u.a)(I,2),T=C[0],D=C[1];function A(e){a(e)}function F(e){m({lat:e.coords.latitude,lng:e.coords.longitude})}if(Object(r.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(F):alert("Geolocation is not supported by this browser.")}),[]),Object(r.useEffect)((function(){!function(){if(!f||!b)return;var e={location:new window.google.maps.LatLng(b.lat,b.lng),radius:"3800",type:["meal_takeaway"]};new window.google.maps.places.PlacesService(f).nearbySearch(e,A)}()}),[f,b]),void 0===window.google)return null;function B(e){c(e)}return Object(i.jsxs)(i.Fragment,{children:[t&&Object(i.jsx)(y,{restaurants:n,selectedRestaurant:t,setSelectedRestaurant:c,addReviewToRestaurant:l,map:f}),w&&Object(i.jsx)(R,{addNewRestaurant:function(e,t){var a=Object(j.a)({name:e,place_id:function(e){var t=Math.floor(1e10*Math.random());return t=e.replace(/\s+/g,"").substring(0,8)+t}(e),vicinity:t,restaurantType:"dummy",image:k,ratings:[{ratingID:null,rating:null,comment:"this submission is awaiting approval by our moderators and is not available right now.  Please try again later"}]},T);N(!1),s(a)},setAddRestaurantModal:N}),Object(i.jsxs)(g.a,{mapContainerStyle:S,center:b,onRightClick:function(e){var t=e.latLng.lat(),a=e.latLng.lng();D({lat:t,lng:a}),N(!0)},zoom:16,onLoad:function(e){O(e)},children:[Object(i.jsx)(g.b,{position:b,icon:"http://maps.google.com/mapfiles/kml/paddle/red-stars.png"}),n&&n.filter((function(e){return"dummy"!==e.restaurantType})).map((function(e){return Object(i.jsx)(g.b,{onClick:function(){return B(e)},id:e,position:{lat:void 0===e.geometry?e.location.lat:e.geometry.location.lat(),lng:void 0===e.geometry?e.location.lng:e.geometry.location.lng()},icon:"http://maps.google.com/mapfiles/kml/paddle/orange-stars.png"})})),n&&n.filter((function(e){return"dummy"===e.restaurantType})).map((function(e){return Object(i.jsx)(g.b,{onClick:function(){return B(e)},id:e,position:{lat:e.lat,lng:e.lng},icon:"http://maps.google.com/mapfiles/kml/paddle/orange-stars.png"})})),Object(i.jsx)(i.Fragment,{})]})]})}var I=s.a.memo(N),C=a.p+"static/media/kFSeafood.2c732557.png",T=a.p+"static/media/kevinVegan.6b645464.png",D=a.p+"static/media/whereItAllVegan.d7946d14.png",A=[{place_id:"thefunkychicken",name:"The Funky Chicken",vicinity:"4, Adelaide Street, Cardiff CF10 5BS",image:[a.p+"static/media/theFunkyChicken.19041de3.png"],restaurantType:"dummy",lat:51.463649,lng:-3.168304,price_level:1,rating:3.6,ratings:[{ratingID:1,rating:2,text:"Terrible service, not so funky! Yikes!"},{ratingID:2,rating:1,text:"OMG, why did they chuck Carly out, it wasn't even her fault chicken was all over the floor"},{ratingID:3,rating:5,text:"Great guys, GREAT CHICKEN"},{ratingID:4,rating:5,text:"If you are after dirt cheap meat after a night out, this is the place"},{ratingID:5,rating:5,text:"Los Pollos Hermanes"}]},{place_id:"kfseafood",name:"K.F.Seafood",vicinity:"22 Mermaid Quay, Cardiff, CF10 5BZ",image:[C],restaurantType:"dummy",lat:51.463381,lng:-3.165384,price_level:2,rating:3.5,ratings:[{ratingID:1,rating:2,text:"There's something fishy about this place!  They always get the order wrong, or atleast don't know which type of fish is which!"},{ratingID:2,rating:5,text:"Salmon please save me from myself!  Great fish restaurant"},{ratingID:3,rating:4,text:"Great guys, GREAT FISH"},{ratingID:4,rating:3,text:"cRAB LINGUINI WAS TO DIE FOR!!!1!"}]},{place_id:"kevinvegan",name:"Kevin Vegan",vicinity:"110 Bute Street, Cardiff CF10 5AJ",image:[T],restaurantType:"dummy",lat:51.465293,lng:-3.165973,price_level:3,rating:4.5,ratings:[{ratingID:1,rating:4,text:"God Cress this place"},{ratingID:2,rating:5,text:"SWEET! (potato)"},{ratingID:3,rating:5,text:"Lettuce eat here every week from now on!"},{ratingID:4,rating:4,text:"onYUM"}]},{place_id:"whereitallvegan",name:"Where it all Vegan",vicinity:"2 Pierhead St, Cardiff, CF10 4QQ",image:[D],restaurantType:"dummy",lat:51.466567,lng:-3.158641,price_level:3,rating:4.5,ratings:[{ratingID:1,rating:5,text:"great imitation burgers, much better than beyond burgers"},{ratingID:2,rating:5,text:"I would give this six rating if i could!"},{ratingID:3,rating:5,text:"Talk of the town, much better than Kevin Vegan!"},{ratingID:4,rating:4,text:"WOW, this food is dangerously good!"},{ratingID:5,rating:4,text:"So impressive how like meat this tastes"},{ratingID:6,rating:4,text:"I love it at Where It All Vegan, where their consensus on meat is to ban, so with a knife and fork, I ate their imitation pork, and now i'm their biggest fan!"}]},{place_id:"pizzahat",name:"Pizza Hat",vicinity:"Dumballs Road Bottom, Cardiff CF10 5FW",image:[a.p+"static/media/pizzaHat.6ff968cb.png"],restaurantType:"dummy",lat:51.465691,lng:-3.17055,price_level:2,rating:4,ratings:[{ratingID:1,rating:4,text:"I was NOT expecting them to be wearing pizza on their head!"},{ratingID:2,rating:3,text:"I was expecting them to be wearing pizza on their head!"},{ratingID:3,rating:5,text:"oooooof that pizza is licious"},{ratingID:4,rating:4,text:"omnom nom nom nom pepperoni nom nom om.  This place is amazing and the staff are so friendly.  They do the best deep pan anywhere in Cardiff"}]}];var F=function(e){var t=e.restaurant,a=e.setSelectedRestaurant;return Object(i.jsxs)("div",{className:"restaurantItem",onClick:function(){a(t)},id:t.place_id,children:[Object(i.jsx)("h2",{className:"AsideHeader",children:t.name}),"\n",Object(i.jsxs)("p",{className:"AsideAddress",children:[t.vicinity," "]})]})};var B=function(e){var t=e.setFilterValue;function a(e){t(e)}return Object(i.jsxs)("div",{className:"FilterContainer",children:[Object(i.jsx)("h2",{children:"\xa0\xa0\xa0\xa0 Filter Restaurant by Rating (out of 5):"}),Object(i.jsxs)("ul",{className:"priceFilter",children:[Object(i.jsx)("li",{children:Object(i.jsx)("div",{className:"priceButton",onClick:function(){return a("all")},id:"All",children:"All Restaurants"})}),Object(i.jsx)("li",{children:Object(i.jsx)("div",{className:"priceButton",onClick:function(){return a("threePlus")},id:"price3",children:"3 to 5 Stars"})}),Object(i.jsx)("li",{children:Object(i.jsx)("div",{className:"priceButton",onClick:function(){return a("fourPlus")},id:"price4",children:"4 to 5 Stars"})})]})]})};var P=function(e){var t=e.restaurants,a=e.setSelectedRestaurant,n=e.setButtonBottom,s=e.setButtonTop,c=Object(r.useState)(null),l=Object(u.a)(c,2),o=l[0],d=l[1],j=[],g=[],b=t;if("fourPlus"===o){g=[];for(var m=0;m<t.length;m++){t[m].rating>=4&&g.push(t[m])}b=g}if("threePlus"===o){j=[];for(var h=0;h<t.length;h++){t[h].rating>=3&&j.push(t[h])}b=j}return"threePlus"!==o&&"fourPlus"!==o&&(b=t),Object(i.jsxs)("div",{className:"Aside",children:[Object(i.jsx)(B,{setFilterValue:d}),Object(i.jsx)("div",{className:"RestaurantList",children:b.map((function(e){return Object(i.jsx)(F,{restaurant:e,setSelectedRestaurant:a,setButtonBottom:n,setButtonTop:s})}))})]})};var E=function(){var e=Object(r.useState)(A),t=Object(u.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(null),c=Object(u.a)(s,2),l=c[0],j=c[1];return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("img",{src:d,className:"App-logo",alt:"logo"}),Object(i.jsx)("h1",{className:"MainLogoText",children:Object(i.jsx)("u",{children:"Street Eat"})}),Object(i.jsx)("h5",{className:"TagLine",children:"Word on the Street for where to Eat "}),Object(i.jsx)("p",{className:"AddMessage",children:"\xa0 Don't see your favourite takeaway? Right click on the map to add it! \xa0"})]}),Object(i.jsxs)("div",{className:"container",onContextMenu:function(e){return e.preventDefault()},children:[Object(i.jsx)(I,{setSelectedRestaurant:j,restaurants:a,selectedRestaurant:l,addRestaurant:function(e){n([].concat(Object(o.a)(a),[e]))},setRestaurants:function(e){n([].concat(Object(o.a)(A),Object(o.a)(e)))},addReviewToRestaurant:function(e,t,i){var r=a.map((function(a){return a.place_id===e&&(console.log(a),"dummy"===l.restaurantType?(console.log("is dummy"),a.ratings=[].concat(Object(o.a)(a.ratings),[{ratingID:a.ratings.length+1,rating:t,text:i}]),null===l.ratings[0].ratingID&&a.ratings.shift()):a.reviews=[].concat(Object(o.a)(a.reviews),[{ratingID:a.reviews.length+1,rating:t,text:i}])),a}));n(r),console.log("found restaurant",r),console.log(i)}}),Object(i.jsx)(P,{restaurants:a,setSelectedRestaurant:j})]})]})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),r(e),s(e)}))};l.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(E,{})}),document.getElementById("root")),_()}},[[19,1,2]]]);
//# sourceMappingURL=main.a22b2b7f.chunk.js.map